<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<h1>Say a colour</h1>
<p>Easy</p>

<span style="background:PINK;">PINK</span>
<span style="background:PERU;">PERU</span>
<span style="background:SALMON;">SALMON</span>
<span style="background:MAGENTA;">MAGENTA</span>
<span style="background:WHEAT;">WHEAT</span>
<span style="background:VIOLET;">VIOLET</span>
<span style="background:PLUM;">PLUM</span>
<span style="background:TOMATO;">TOMATO</span>
<span style="background:TEAL;">TEAL</span>
<span style="background:Silver;">Silver</span>
<span style="background:DARKRED;">DARKRED</span>

<p>Harder</p>

<span style="background:lemonchiffon;">lemonchiffon</span>
<span style="background:dodgerblue;">dodgerblue</span>
<span style="background:cornflowerblue;">cornflowerblue</span>
<span style="background:PALEGOLDENROD;">PALEGOLDENROD</span>
<span style="background:STEELBLUE;">STEELBLUE</span>
<span style="background:CHARTREUSE;">CHARTREUSE</span>
<span style="background:lightgoldenrodyellow;">lightgoldenrodyellow</span>

<br>
<!--<svg width="400" height="110" id="rectFill">-->
    <!--<rect width="300" height="100" style="fill:white;stroke-width:3;stroke:rgb(0,0,0)" />-->
<!--</svg>-->

<canvas id="canvas" width="800" height="500" fill="white" pointer-events="visiblePoint"></canvas>



<style>
    html,body {
        height:100%;
    }
    body {
        transition:all 0.4s;
        font-family: sans-serif;
        text-align: center;
    }
    h1 {
        font-size: 150px;
        transition:all 0.4s;
        /*top:50%;*/
        position: relative;
        color:rgba(0,0,0,0.4);
    }
    span {
        color:rgba(0,0,0,0.4);
        /*text-shadow:1px 1px 0 rgba(0,0,0,0.5);*/
        padding:10px;
        display: inline-block;
        font-weight: 600;
        text-transform: uppercase;
        margin-bottom: 5px;
    }

    canvas {
        cursor: crosshair;
        border: 1px solid #000000;
    }



</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js"></script>

<script>


    //Canvas
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    //Variables
    var canvasx = $(canvas).offset().left;
    var canvasy = $(canvas).offset().top;
    var last_mousex = last_mousey = 0;
    var mousex = mousey = 0;
    var mousedown = false;

    // this for selection of the
    var selection = null;

    //Mousedown
    $(canvas).on('mousedown', function(e) {
        last_mousex = parseInt(e.clientX-canvasx);
        last_mousey = parseInt(e.clientY-canvasy);
        mousedown = true;
    });

    //Mouseup
    $(canvas).on('mouseup', function(e) {
        mousedown = false;
    });


    //Mousemove
    $(canvas).on('mousemove', function(e) {
        mousex = parseInt(e.clientX-canvasx);
        mousey = parseInt(e.clientY-canvasy);
        if(mousedown) {
            ctx.clearRect(0,0,canvas.width,canvas.height); //clear canvas
            ctx.beginPath();
            //width and height was initially local
            width = mousex-last_mousex;
            height = mousey-last_mousey;
            ctx.rect(last_mousex,last_mousey,width,height);
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 2;
            ctx.stroke();
        }
        //Output
        $('#output').html('current: '+mousex+', '+mousey+'<br/>last: '+last_mousex+', '+last_mousey+'<br/>mousedown: '+mousedown);


    });

    var speech  = function(){
        var x = "lol";

        var recognition = new webkitSpeechRecognition();
        recognition.continuous = true;
        recognition.interimResults = true;


        recognition.onresult = function(event) {
            var colour = event.results[event.results.length - 1][0].transcript;
            // make it lowercase
            colour = colour.toLowerCase();
            // strip the spaces out of it
            colour = colour.replace(/\s/gi,'');
            // $('body').css('background',colour);
            // $('svg').css('background',colour);
            // $('rect').css('fill',colour);
            $('h1').text(colour);
            ctx.fillStyle= colour;
            ctx.fillRect(last_mousex,last_mousey,width,height);
        };

        recognition.start();

    };

    if (!('webkitSpeechRecognition' in window)) {
        alert("Sorry you require a browser that supports speech recognition");
    }
    else {
        speech();
    }


</script>
</body>
</html>